<!doctype html><html lang=en-us dir=ltr data-bs-theme=light tabindex=0><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>‚ö° Local Energy Assistant: C# + GPT-OSS + RAG</title><meta name=keywords content="CSharp,DotNET,AI,Local LLM,RAG,GPT-OSS,Energy Management,Privacy,Tool Calling,Console Application"><meta name=description content="Build a privacy-first AI energy assistant using C#, local GPT-OSS models, RAG, and tool calling. Analyse solar, gas, and weather data completely offline."><meta name=author content="Sujith Quintelier"><meta name=robots content="index,follow"><meta property="og:title" content="‚ö° Local Energy Assistant: C# + GPT-OSS + RAG"><meta property="og:description" content="Build a privacy-first AI energy assistant using C#, local GPT-OSS models, RAG, and tool calling. Analyse solar, gas, and weather data completely offline."><meta property="og:image" content="https://quintelier.dev/posts/2025/08/local-energy-assistant-csharp-gpt-oss/cover.jpg"><meta property="og:url" content="https://quintelier.dev/posts/2025/08/local-energy-assistant-csharp-gpt-oss/"><meta property="og:type" content='"post"'><meta property="og:site_name" content="Sujith Quintelier"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="‚ö° Local Energy Assistant: C# + GPT-OSS + RAG"><meta name=twitter:description content="Build a privacy-first AI energy assistant using C#, local GPT-OSS models, RAG, and tool calling. Analyse solar, gas, and weather data completely offline."><meta name=twitter:image content="https://quintelier.dev/posts/2025/08/local-energy-assistant-csharp-gpt-oss/cover.jpg"><meta name=twitter:site content="@sujithq"><meta name=twitter:image:alt content="Build a privacy-first AI energy assistant using C#, local GPT-OSS models, RAG, and tool calling. Analyse solar, gas, and weather data completely offline."><meta name=theme-color content="#6a1d57"><link rel=canonical href=https://quintelier.dev/posts/2025/08/local-energy-assistant-csharp-gpt-oss/><link rel=alternate type=application/rss+xml title="RSS Feed" href=https://quintelier.dev/index.xml><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=/android-chrome-512x512.png><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel="shortcut icon" href=/favicon.ico><link href=https://fonts.googleapis.com rel=preconnect><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href=/scss/posts.min.3bf9c567d49448a6e4f2d33c8dcfe57244b19008886bbf74b789a15c935cfbf7.css integrity="sha256-O/nFZ9SUSKbk8tM8jc/lckSxkAiIa790t4mhXJNc+/c="><link rel=stylesheet href=/vendor/aos/css/aos.min.a30d75de86924b3a6a4e5a355506e6e3b5db77f7ed32f24c06c739e9236dbcf3.css integrity="sha256-ow113oaSSzpqTlo1VQbm47Xbd/ftMvJMBsc56SNtvPM="><link rel=stylesheet href=/vendor/swiper/css/swiper-bundle.min.min.ab0befab6e94ea5ce6c0050f9723206b76bc80117a1aca7c2a978672b2d23b17.css integrity="sha256-qwvvq26U6lzmwAUPlyMga3a8gBF6Gsp8KpeGcrLSOxc="><link rel=stylesheet href=/vendor/prismjs/css/prism-solarizedlight.min.2ebe3d0f213efcab2d9cb741c6a641a03620362e8e35f672019c372c387107d2.css integrity="sha256-Lr49DyE+/KstnLdBxqZBoDYgNi6ONfZyAZw3LDhxB9I="><script>(function(){let e=localStorage.getItem("theme")||document.documentElement.getAttribute("data-bs-theme")||"light";document.documentElement.setAttribute("data-bs-theme",e)})()</script><style>.cc-banner{position:fixed;bottom:0;left:0;right:0;z-index:2147483646;display:none;box-sizing:border-box;padding:1rem;border-top:1px solid rgba(0,0,0,.1);border-bottom:1px solid rgba(0,0,0,.1);font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#111;color:#f1f1f1}.cc-inner{max-width:980px;margin:0 auto;display:flex;gap:.75rem;align-items:center}.cc-text{flex:auto}.cc-actions{display:flex;gap:.5rem;flex-wrap:wrap}.cc-btn{cursor:pointer;border:1px solid transparent;padding:.5rem .8rem;border-radius:.375rem;font-weight:600}.cc-btn-primary{background:#e6e6e6;color:#111}.cc-btn-secondary{background:0 0;border-color:#444;color:#ddd}.cc-link{text-decoration:underline;color:#c9e3ff}</style><div id=cc-banner class=cc-banner role=dialog aria-live=polite aria-label="Cookie consent"><div class=cc-inner><div class=cc-text>This site uses cookies for analytics via Microsoft Clarity. We only enable it after your consent.
See our <a class=cc-link href=/privacy/ rel=nofollow>Privacy Policy</a>.</div><div class=cc-actions><button id=cc-accept class="cc-btn cc-btn-primary" aria-label="Accept analytics cookies">Accept</button>
<button id=cc-decline class="cc-btn cc-btn-secondary" aria-label="Decline analytics cookies">Decline</button></div></div></div><script>(function(){var i='"rf5ih14aps"',a='"clarityConsent"',r=!0,e=!1,t=(""+i).replace(/^['"]+|['"]+$/g,""),n=(""+a).replace(/^['"]+|['"]+$/g,"");if(e){window.dataLayer=window.dataLayer||[];function c(){dataLayer.push(arguments)}c("consent","default",{ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"denied",functionality_storage:"denied",personalization_storage:"denied",security_storage:"granted"})}function s(){if(!t)return;(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script",t)}function o(t){try{localStorage.setItem(n,t?"yes":"no")}catch{}if(t){if(e){function o(){dataLayer.push(arguments)}o("consent","update",{analytics_storage:"granted",functionality_storage:"granted"})}s(),typeof clarity=="function"&&clarity("consent","yes")}else{if(e){function o(){dataLayer.push(arguments)}o("consent","update",{analytics_storage:"denied",functionality_storage:"denied"})}typeof clarity=="function"&&clarity("consent","no")}}function l(){if(!r)return;var t,e=null;try{e=localStorage.getItem(n)}catch{}if(e==="yes"){s(),typeof clarity=="function"&&clarity("consent","yes");return}if(e==="no"){typeof clarity=="function"&&clarity("consent","no");return}t=document.getElementById("cc-banner"),t&&(t.style.display="block")}document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("cc-accept"),n=document.getElementById("cc-decline"),e=document.getElementById("cc-banner");t&&t.addEventListener("click",function(){o(!0),e&&(e.style.display="none")}),n&&n.addEventListener("click",function(){o(!1),e&&(e.style.display="none")}),l()})})()</script></head><body><header id=header class="header sticky-top"><nav class="navbar navbar-expand-lg fixed-top bg-primary navbar-transparent" data-bs-theme=dark><div class="container mt-0"><a class=navbar-brand href=/>Sujith Quintelier</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNav data-bs-theme=dark><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/resume/>Resume</a></li><li class=nav-item><a class=nav-link href=/posts/>Archives</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=/ data-bs-toggle=dropdown>Taxonomy</a><ul class=dropdown-menu><li><a class=dropdown-item href=/tags/>Tags</a></li><li><a class=dropdown-item href=/categories/>Categories</a></li><li><a class=dropdown-item href=/series/>Series</a></li></ul></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=/ data-bs-toggle=dropdown>Tools</a><ul class=dropdown-menu><li><a class=dropdown-item href=/tools/cidr-calculator/>CIDR Calculator</a></li><li><a class=dropdown-item href=/tools/cert-renewal/>Azure Certification Renewal</a></li><li><a class=dropdown-item href=/tools/tech-radar/>Tech Radar</a></li></ul></li><li class=nav-item><a class=nav-link href=/updates/>Updates</a></li></ul><ul class="navbar-nav ms-lg-auto align-items-lg-center"><li class=nav-item><a target=_blank rel=noopener class="nav-link d-flex align-items-center" href=https://www.linkedin.com/in/sujithquintelier/><i class="fab fa-linkedin"></i><span class="d-lg-none ms-2">linkedin</span></a></li><li class=nav-item><a target=_blank rel=noopener class="nav-link d-flex align-items-center" href=https://github.com/sujithq/><i class="fab fa-github"></i><span class="d-lg-none ms-2">github</span></a></li><li class=nav-item><a target=_blank rel=noopener class="nav-link d-flex align-items-center" href=https://x.com/SujithQ/><i class="fab fa-x-twitter"></i><span class="d-lg-none ms-2">twitter</span></a></li><li class=nav-item><a target=_blank rel=noopener class="nav-link d-flex align-items-center" href=https://mastodon.social/@sujithq><i class="fab fa-mastodon"></i><span class="d-lg-none ms-2">mastodon</span></a></li><li class=nav-item><a target=_blank rel=noopener class="nav-link d-flex align-items-center" href=https://bsky.app/profile/sujithq.bsky.social><i class="fa-brands fa-bluesky"></i><span class="d-lg-none ms-2">bsky</span></a></li><li class=nav-item><a target=_blank rel=noopener class="nav-link d-flex align-items-center" href=https://www.facebook.com/sujith.quintelier/><i class="fab fa-facebook"></i><span class="d-lg-none ms-2">facebook</span></a></li><li class=nav-item><a target=_blank rel=noopener class="nav-link d-flex align-items-center" href=https://www.instagram.com/sujithquintelier/><i class="fab fa-instagram"></i><span class="d-lg-none ms-2">instagram</span></a></li><li class=nav-item><a target=_blank rel=noopener class="nav-link d-flex align-items-center" href=https://www.buymeacoffee.com/sujithq><i class="fa fa-mug-hot"></i><span class="d-lg-none ms-2">buymeacoffee</span></a></li><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div><hr class="d-lg-none my-2 text-white-50"></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle d-flex align-items-center" href=# id=theme-menu aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme"><i class="fas fa-adjust"></i>
<span class="d-lg-none ms-2">Toggle theme</span></a><ul class="dropdown-menu dropdown-menu-end"><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<i class="fas fa-sun"></i><span class=ms-2>Light</span></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=true>
<i class="fas fa-moon"></i><span class=ms-2>Dark</span></button></li></ul></li><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div><hr class="d-lg-none my-2 text-white-50"></li><li class=nav-item><form class="d-flex search-form align-items-center" action=/search/ data-bs-theme=dark><input name=keyword class="form-control me-2" type=search placeholder=keywords>
<button title=Search class="btn btn-secondary" type=submit>
<svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></button></form></li></ul></div></div></nav></header><main class=main><div class=container><div class="row mt-5"><div class="col-lg mt-3"><a href=https://quintelier.dev/><i class="fas fa-arrow-left mx-1"></i>All posts</a><div class=text-center><span class=mx-1>Written by</span>
<span><a href=/resume/>Sujith Quintelier</a>
</span><span class=mx-1>‚Ä¢</span>
<span>Aug 7, 2025</span></div><h1 class=text-center><strong>‚ö° Local Energy Assistant: C# + GPT-OSS + RAG</strong></h1><div class="card border-0 mt-3 mb-3"><div class=text-center><picture><source srcset=/posts/2025/08/local-energy-assistant-csharp-gpt-oss/cover_hu_f0d84554665a3bf2.webp type=image/webp><img src=/posts/2025/08/local-energy-assistant-csharp-gpt-oss/cover_hu_8deda3eccd417f56.jpg alt="Build a privacy-first AI energy assistant using C#, local GPT-OSS models, RAG, and tool calling. Analyse solar, gas, and weather data completely offline." class="img-fluid rounded" loading=lazy></picture></div><div class="text-center mt-3"><div class="d-flex flex-wrap gap-0 w-100 justify-content-start justify-content-md-center rounded share-actions" role=group aria-label=Share><button type=button class="btn resp-sharing-button--facebook"><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-facebook"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--twitter"><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG&amp;url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-x-twitter"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--tumblr"><a class=resp-sharing-button__link href="https://www.tumblr.com/widgets/share/tool?posttype=link&amp;title=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG&amp;caption=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG&amp;content=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f&amp;canonicalUrl=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f&amp;shareSource=tumblr_share_button" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fa-brands fa-square-tumblr"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--email"><a class=resp-sharing-button__link href="mailto:?subject=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG&amp;body=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f" target=_self rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fas fa-envelope"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--pinterest"><a class=resp-sharing-button__link href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f&amp;media=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f&amp;description=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--pinterest resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-pinterest"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--linkedin"><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f&amp;title=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG&amp;summary=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG&amp;source=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-linkedin"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--reddit"><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f&amp;resubmit=true&amp;title=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-reddit"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--xing"><a class=resp-sharing-button__link href="https://www.xing.com/app/user?op=share;url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f;title=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--xing resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fa-brands fa-square-xing"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--whatsapp"><a class=resp-sharing-button__link href="whatsapp://send?text=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG%20https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-whatsapp"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--hackernews"><a class=resp-sharing-button__link href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f&amp;t=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fa-brands fa-square-hacker-news"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--vk"><a class=resp-sharing-button__link href="http://vk.com/share.php?title=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG&amp;url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--vk resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fa-brands fa-vk"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--telegram"><a class=resp-sharing-button__link href="https://telegram.me/share/url?text=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG&amp;url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fab fa-telegram"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--flipboard"><a class=resp-sharing-button__link href="https://share.flipboard.com/bookmarklet/popout?v=2&title=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG&url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--flipboard resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fa-brands fa-flipboard"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--pocket"><a class=resp-sharing-button__link href="https://getpocket.com/save?url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--pocket resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fa-brands fa-get-pocket"></i></div></div></a></button>
<button type=button class="btn resp-sharing-button--buffer"><a class=resp-sharing-button__link href="https://bufferapp.com/add?url=https%3a%2f%2fquintelier.dev%2fposts%2f2025%2f08%2flocal-energy-assistant-csharp-gpt-oss%2f&text=%e2%9a%a1%20Local%20Energy%20Assistant%3a%20C%23%20%2b%20GPT-OSS%20%2b%20RAG" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--buffer resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><i class="fa-brands fa-buffer"></i></div></div></a></button></div></div><div class=card-body><div class="d-flex align-items-center"><span>Aug 7, 2025</span></div><div><h2 id=introduction>Introduction</h2><p>Imagine having an AI assistant that understands your energy consumption patterns, solar production, and weather data ‚Äî all running locally on your machine with zero cloud dependencies. No API keys, no subscription fees, no data leaving your premises.</p><p>In this hands-on guide, we&rsquo;ll build a <strong>Local Energy Assistant</strong> using C#, the open-source GPT-OSS-20B model, Retrieval-Augmented Generation (RAG), and custom tool calling. Perfect for privacy-conscious developers who want intelligent insights from their smart meter data.</p><h2 id=what-were-building>What We&rsquo;re Building</h2><p>Our <strong>AI Energy Copilot</strong> will provide:</p><ul><li><strong>Solar Production Analysis</strong>: Identify peak generation days and weather correlations</li><li><strong>Gas Usage Intelligence</strong>: Compare consumption patterns across weather conditions</li><li><strong>Grid Import/Export Insights</strong>: Calculate net usage and energy balance</li><li><strong>Weather Context</strong>: Link energy patterns to historical weather data</li><li><strong>Tool-Based Actions</strong>: Execute specific queries via natural language commands</li><li><strong>Complete Privacy</strong>: Everything runs locally with your own data</li></ul><h2 id=prerequisites>Prerequisites</h2><p>Before we begin, ensure you have:</p><ul><li><a href=https://dotnet.microsoft.com/download target=_blank rel="noopener noreferrer">.NET SDK 9+</a> installed</li><li><strong>For Testing/Development</strong>: GitHub account with access to <a href=https://github.com/marketplace/models target=_blank rel="noopener noreferrer">GitHub Models</a> (testing platform for comparing AI models)</li><li><strong>For Production</strong>: <a href=https://ollama.com target=_blank rel="noopener noreferrer">Ollama</a> for running local LLMs</li><li>Your energy data in JSON format (smart meter exports, solar inverter logs, etc.)</li><li>Basic understanding of C# and JSON</li></ul><h2 id=why-gpt-oss-for-energy-analysis>Why GPT-OSS for Energy Analysis?</h2><p><a href=https://huggingface.co/openai/gpt-oss-20b target=_blank rel="noopener noreferrer">OpenAI&rsquo;s GPT-OSS</a> represents a breakthrough in open-source AI, specifically designed for local and specialized use cases like our energy assistant:</p><h3 id=open-and-permissive>Open and Permissive</h3><ul><li><strong>Apache 2.0 License</strong>: Build freely without copyleft restrictions or patent risk</li><li><strong>Commercial Use</strong>: Perfect for personal projects and commercial energy management tools</li><li><strong>No Vendor Lock-in</strong>: Complete control over your AI infrastructure</li></ul><h3 id=optimised-for-local-deployment>Optimised for Local Deployment</h3><ul><li><strong>20B Parameter Model</strong>: Designed for consumer hardware (runs within 16GB memory)</li><li><strong>Native MXFP4 Quantization</strong>: Efficient memory usage through built-in quantization</li><li><strong>Official Ollama Support</strong>: Seamless integration with local deployment tools</li></ul><h3 id=advanced-capabilities-for-energy-analysis>Advanced Capabilities for Energy Analysis</h3><ul><li><strong>Native Tool Calling</strong>: Built-in support for function calling and agentic operations</li><li><strong>Configurable Reasoning</strong>: Adjust reasoning effort (low, medium, high) based on query complexity</li><li><strong>Full Chain-of-Thought</strong>: Complete access to the model&rsquo;s reasoning process for debugging</li><li><strong>Fine-tunable</strong>: Customize for domain-specific energy analysis tasks</li></ul><p>This makes GPT-OSS ideal for analyzing personal energy data while maintaining complete privacy and control.</p><h2 id=setting-up-llm-options>Setting Up LLM Options</h2><h3 id=option-1-development-testing-with-github-models>Option 1: Development Testing with GitHub Models</h3><p><strong>Important</strong>: GitHub Models is a testing platform/environment for developers to test and compare different AI models - not suitable for production workloads.</p><p>Get your GitHub Personal Access Token:</p><ol><li>Visit <a href=https://github.com/settings/tokens target=_blank rel="noopener noreferrer">GitHub Settings > Developer settings > Personal access tokens</a></li><li>Create a token with <code>model</code> scope</li><li>Set environment variable:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Windows</span>
</span></span><span style=display:flex><span>set GITHUB_TOKEN<span style=color:#f92672>=</span>your_token_here
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Linux/macOS</span>
</span></span><span style=display:flex><span>export GITHUB_TOKEN<span style=color:#f92672>=</span>your_token_here
</span></span></code></pre></div><h3 id=option-2-production-deployment-with-ollama>Option 2: Production Deployment with Ollama</h3><p>For production deployment:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install and run GPT-OSS-20B locally</span>
</span></span><span style=display:flex><span>ollama pull gpt-oss:20b
</span></span><span style=display:flex><span>ollama run gpt-oss:20b
</span></span></code></pre></div><p>This starts a local OpenAI-compatible API endpoint at <code>http://localhost:11434/v1</code>.</p><h2 id=preparing-your-energy-dataset>Preparing Your Energy Dataset</h2><p>Create a <code>data/energy.json</code> file with your energy consumption data. Here&rsquo;s a sample structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;2025-08-01&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;solar&#34;</span>: <span style=color:#ae81ff>4.2</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;grid_consumed&#34;</span>: <span style=color:#ae81ff>5.1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;grid_injected&#34;</span>: <span style=color:#ae81ff>1.8</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;gas_m3&#34;</span>: <span style=color:#ae81ff>2.4</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;weather&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;temperature&#34;</span>: <span style=color:#ae81ff>23.5</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;condition&#34;</span>: <span style=color:#e6db74>&#34;sunny&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;2025-08-02&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;solar&#34;</span>: <span style=color:#ae81ff>0.3</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;grid_consumed&#34;</span>: <span style=color:#ae81ff>6.2</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;grid_injected&#34;</span>: <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;gas_m3&#34;</span>: <span style=color:#ae81ff>4.1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;weather&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;temperature&#34;</span>: <span style=color:#ae81ff>16.0</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;condition&#34;</span>: <span style=color:#e6db74>&#34;rainy&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;2025-08-03&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;solar&#34;</span>: <span style=color:#ae81ff>3.8</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;grid_consumed&#34;</span>: <span style=color:#ae81ff>4.9</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;grid_injected&#34;</span>: <span style=color:#ae81ff>1.2</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;gas_m3&#34;</span>: <span style=color:#ae81ff>1.8</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;weather&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;temperature&#34;</span>: <span style=color:#ae81ff>21.0</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;condition&#34;</span>: <span style=color:#e6db74>&#34;partly_cloudy&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Data Sources</strong>: You can extract this from smart meter readings, solar inverter APIs, or manual logging. Many energy providers offer CSV exports that you can convert to this JSON format.</p><h2 id=creating-the-flexible-console-application>Creating the Flexible Console Application</h2><p>Let&rsquo;s set up our .NET project with support for both deployment modes:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dotnet new console -n EnergyAssistant
</span></span><span style=display:flex><span>cd EnergyAssistant
</span></span><span style=display:flex><span>dotnet add package Microsoft.Extensions.Configuration
</span></span><span style=display:flex><span>dotnet add package Microsoft.Extensions.Configuration.Json
</span></span></code></pre></div><p>Create an <code>appsettings.json</code> configuration file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;LlmProvider&#34;</span>: <span style=color:#e6db74>&#34;GitHub&#34;</span>, <span style=color:#75715e>// &#34;GitHub&#34; for model testing/comparison, &#34;Ollama&#34; for production
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#f92672>&#34;GitHub&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;BaseUrl&#34;</span>: <span style=color:#e6db74>&#34;https://models.inference.ai.azure.com&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Model&#34;</span>: <span style=color:#e6db74>&#34;gpt-4o-mini&#34;</span>, <span style=color:#75715e>// Try different models: gpt-4o, gpt-4o-mini, etc.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>&#34;Token&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#75715e>// Set via environment variable GITHUB_TOKEN
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Ollama&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;BaseUrl&#34;</span>: <span style=color:#e6db74>&#34;http://localhost:11434/v1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Model&#34;</span>: <span style=color:#e6db74>&#34;gpt-oss:20b&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Token&#34;</span>: <span style=color:#e6db74>&#34;local&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=building-the-tool-system>Building the Tool System</h2><p>Create <code>Tools.cs</code> to handle energy-specific queries:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>using</span> System.Text.Json;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> EnergyAssistant
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Tools</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>readonly</span> Dictionary&lt;<span style=color:#66d9ef>string</span>, JsonElement&gt; data =
</span></span><span style=display:flex><span>            JsonSerializer.Deserialize&lt;Dictionary&lt;<span style=color:#66d9ef>string</span>, JsonElement&gt;&gt;(
</span></span><span style=display:flex><span>                File.ReadAllText(<span style=color:#e6db74>&#34;data/energy.json&#34;</span>))!;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> PeakSolarDay()
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> maxEntry = data
</span></span><span style=display:flex><span>                .OrderByDescending(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;solar&#34;</span>).GetDouble())
</span></span><span style=display:flex><span>                .First();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> solar = maxEntry.Value.GetProperty(<span style=color:#e6db74>&#34;solar&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> weather = maxEntry.Value.GetProperty(<span style=color:#e6db74>&#34;weather&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> condition = weather.GetProperty(<span style=color:#e6db74>&#34;condition&#34;</span>).GetString();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> temp = weather.GetProperty(<span style=color:#e6db74>&#34;temperature&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;‚òÄÔ∏è Peak solar production: {solar} kWh on {maxEntry.Key} &#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;(Weather: {condition}, {temp}¬∞C)&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> CompareGasUsage()
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> coldDays = data.Where(d =&gt;
</span></span><span style=display:flex><span>                d.Value.GetProperty(<span style=color:#e6db74>&#34;weather&#34;</span>).GetProperty(<span style=color:#e6db74>&#34;temperature&#34;</span>).GetDouble() &lt; <span style=color:#ae81ff>15</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> warmDays = data.Where(d =&gt;
</span></span><span style=display:flex><span>                d.Value.GetProperty(<span style=color:#e6db74>&#34;weather&#34;</span>).GetProperty(<span style=color:#e6db74>&#34;temperature&#34;</span>).GetDouble() &gt;= <span style=color:#ae81ff>15</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> coldAvg = coldDays.Any() ?
</span></span><span style=display:flex><span>                coldDays.Average(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;gas_m3&#34;</span>).GetDouble()) : <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> warmAvg = warmDays.Any() ?
</span></span><span style=display:flex><span>                warmDays.Average(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;gas_m3&#34;</span>).GetDouble()) : <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;üî• Average gas usage: {coldAvg:F2} m¬≥ (cold days &lt; 15¬∞C) vs &#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;{warmAvg:F2} m¬≥ (warm days ‚â• 15¬∞C)&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> NetUsage(<span style=color:#66d9ef>string</span> date)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (!data.TryGetValue(date, <span style=color:#66d9ef>out</span> <span style=color:#66d9ef>var</span> day))
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;‚ùå No data available for {date}&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> consumed = day.GetProperty(<span style=color:#e6db74>&#34;grid_consumed&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> injected = day.GetProperty(<span style=color:#e6db74>&#34;grid_injected&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> net = consumed - injected;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> status = net &gt; <span style=color:#ae81ff>0</span> ? <span style=color:#e6db74>&#34;üìà Net consumer&#34;</span> : <span style=color:#e6db74>&#34;üìâ Net producer&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;‚ö° {date}: {Math.Abs(net):F2} kWh ({status})&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> DayDetails(<span style=color:#66d9ef>string</span> date)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (!data.TryGetValue(date, <span style=color:#66d9ef>out</span> <span style=color:#66d9ef>var</span> day))
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;‚ùå No data available for {date}&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> solar = day.GetProperty(<span style=color:#e6db74>&#34;solar&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> consumed = day.GetProperty(<span style=color:#e6db74>&#34;grid_consumed&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> injected = day.GetProperty(<span style=color:#e6db74>&#34;grid_injected&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> gas = day.GetProperty(<span style=color:#e6db74>&#34;gas_m3&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> weather = day.GetProperty(<span style=color:#e6db74>&#34;weather&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> temp = weather.GetProperty(<span style=color:#e6db74>&#34;temperature&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> condition = weather.GetProperty(<span style=color:#e6db74>&#34;condition&#34;</span>).GetString();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;üìä {date} Summary:\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Solar: {solar} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Grid In: {consumed} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Grid Out: {injected} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Gas: {gas} m¬≥\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Weather: {condition}, {temp}¬∞C&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> OverallStats()
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalDays = data.Count;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalSolar = data.Sum(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;solar&#34;</span>).GetDouble());
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalConsumed = data.Sum(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;grid_consumed&#34;</span>).GetDouble());
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalInjected = data.Sum(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;grid_injected&#34;</span>).GetDouble());
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalGas = data.Sum(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;gas_m3&#34;</span>).GetDouble());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;üìà Overall Statistics ({totalDays} days):\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Total Solar: {totalSolar:F1} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Total Grid Consumed: {totalConsumed:F1} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Total Grid Injected: {totalInjected:F1} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Total Gas: {totalGas:F1} m¬≥\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Net Grid Usage: {(totalConsumed - totalInjected):F1} kWh&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=implementing-flexible-rag-and-tool-calling>Implementing Flexible RAG and Tool Calling</h2><p>Now create the enhanced application logic in <code>Program.cs</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>using</span> System.Text.Json;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> EnergyAssistant
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Tools</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>readonly</span> Dictionary&lt;<span style=color:#66d9ef>string</span>, JsonElement&gt; data =
</span></span><span style=display:flex><span>            JsonSerializer.Deserialize&lt;Dictionary&lt;<span style=color:#66d9ef>string</span>, JsonElement&gt;&gt;(
</span></span><span style=display:flex><span>                File.ReadAllText(<span style=color:#e6db74>&#34;data/energy.json&#34;</span>))!;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> PeakSolarDay()
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> maxEntry = data
</span></span><span style=display:flex><span>                .OrderByDescending(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;solar&#34;</span>).GetDouble())
</span></span><span style=display:flex><span>                .First();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> solar = maxEntry.Value.GetProperty(<span style=color:#e6db74>&#34;solar&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> weather = maxEntry.Value.GetProperty(<span style=color:#e6db74>&#34;weather&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> condition = weather.GetProperty(<span style=color:#e6db74>&#34;condition&#34;</span>).GetString();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> temp = weather.GetProperty(<span style=color:#e6db74>&#34;temperature&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;‚òÄÔ∏è Peak solar production: {solar} kWh on {maxEntry.Key} &#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;(Weather: {condition}, {temp}¬∞C)&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> CompareGasUsage()
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> coldDays = data.Where(d =&gt;
</span></span><span style=display:flex><span>                d.Value.GetProperty(<span style=color:#e6db74>&#34;weather&#34;</span>).GetProperty(<span style=color:#e6db74>&#34;temperature&#34;</span>).GetDouble() &lt; <span style=color:#ae81ff>15</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> warmDays = data.Where(d =&gt;
</span></span><span style=display:flex><span>                d.Value.GetProperty(<span style=color:#e6db74>&#34;weather&#34;</span>).GetProperty(<span style=color:#e6db74>&#34;temperature&#34;</span>).GetDouble() &gt;= <span style=color:#ae81ff>15</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> coldAvg = coldDays.Any() ?
</span></span><span style=display:flex><span>                coldDays.Average(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;gas_m3&#34;</span>).GetDouble()) : <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> warmAvg = warmDays.Any() ?
</span></span><span style=display:flex><span>                warmDays.Average(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;gas_m3&#34;</span>).GetDouble()) : <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;üî• Average gas usage: {coldAvg:F2} m¬≥ (cold days &lt; 15¬∞C) vs &#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;{warmAvg:F2} m¬≥ (warm days ‚â• 15¬∞C)&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> NetUsage(<span style=color:#66d9ef>string</span> date)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (!data.TryGetValue(date, <span style=color:#66d9ef>out</span> <span style=color:#66d9ef>var</span> day))
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;‚ùå No data available for {date}&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> consumed = day.GetProperty(<span style=color:#e6db74>&#34;grid_consumed&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> injected = day.GetProperty(<span style=color:#e6db74>&#34;grid_injected&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> net = consumed - injected;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> status = net &gt; <span style=color:#ae81ff>0</span> ? <span style=color:#e6db74>&#34;üìà Net consumer&#34;</span> : <span style=color:#e6db74>&#34;üìâ Net producer&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;‚ö° {date}: {Math.Abs(net):F2} kWh ({status})&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> DayDetails(<span style=color:#66d9ef>string</span> date)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (!data.TryGetValue(date, <span style=color:#66d9ef>out</span> <span style=color:#66d9ef>var</span> day))
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;‚ùå No data available for {date}&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> solar = day.GetProperty(<span style=color:#e6db74>&#34;solar&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> consumed = day.GetProperty(<span style=color:#e6db74>&#34;grid_consumed&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> injected = day.GetProperty(<span style=color:#e6db74>&#34;grid_injected&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> gas = day.GetProperty(<span style=color:#e6db74>&#34;gas_m3&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> weather = day.GetProperty(<span style=color:#e6db74>&#34;weather&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> temp = weather.GetProperty(<span style=color:#e6db74>&#34;temperature&#34;</span>).GetDouble();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> condition = weather.GetProperty(<span style=color:#e6db74>&#34;condition&#34;</span>).GetString();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;üìä {date} Summary:\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Solar: {solar} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Grid In: {consumed} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Grid Out: {injected} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Gas: {gas} m¬≥\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Weather: {condition}, {temp}¬∞C&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> OverallStats()
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalDays = data.Count;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalSolar = data.Sum(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;solar&#34;</span>).GetDouble());
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalConsumed = data.Sum(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;grid_consumed&#34;</span>).GetDouble());
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalInjected = data.Sum(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;grid_injected&#34;</span>).GetDouble());
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> totalGas = data.Sum(d =&gt; d.Value.GetProperty(<span style=color:#e6db74>&#34;gas_m3&#34;</span>).GetDouble());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>$&#34;üìà Overall Statistics ({totalDays} days):\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Total Solar: {totalSolar:F1} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Total Grid Consumed: {totalConsumed:F1} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Total Grid Injected: {totalInjected:F1} kWh\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Total Gas: {totalGas:F1} m¬≥\n&#34;</span> +
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>$&#34;   Net Grid Usage: {(totalConsumed - totalInjected):F1} kWh&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=testing-your-flexible-energy-assistant>Testing Your Flexible Energy Assistant</h2><p>Create the data directory and configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir data
</span></span><span style=display:flex><span><span style=color:#75715e># Add your energy.json file to the data directory</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Ensure appsettings.json is in your project root</span>
</span></span></code></pre></div><h3 id=testing-with-github-models-development-only>Testing with GitHub Models (Development Only)</h3><p><strong>Note</strong>: This is for development, testing, and comparing different AI models. Do not use in production.</p><p>Set your token and run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Set environment variable</span>
</span></span><span style=display:flex><span>set GITHUB_TOKEN<span style=color:#f92672>=</span>your_token_here
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run with GitHub Models (model testing mode)</span>
</span></span><span style=display:flex><span>dotnet run
</span></span></code></pre></div><h3 id=running-with-self-hosted-ollama-production-ready>Running with Self-Hosted Ollama (Production Ready)</h3><p>Switch configuration and run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Start Ollama in one terminal</span>
</span></span><span style=display:flex><span>ollama run gpt-oss:20b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Update appsettings.json to use &#34;Ollama&#34; provider, then run</span>
</span></span><span style=display:flex><span>dotnet run
</span></span></code></pre></div><h3 id=runtime-provider-switching>Runtime Provider Switching</h3><p>You can switch between providers while the application is running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>‚ö° Flexible Energy Assistant
</span></span><span style=display:flex><span>üîó Using: GitHub (gpt-4o-mini)
</span></span><span style=display:flex><span>Type &#39;switch&#39; to change LLM provider
</span></span><span style=display:flex><span>Type &#39;exit&#39; to quit
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>üí¨ You: switch
</span></span><span style=display:flex><span>üîÑ Switched to Ollama (gpt-oss:20b)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>üí¨ You: Show me my peak solar day
</span></span></code></pre></div><h3 id=model-comparison-on-github-models>Model Comparison on GitHub Models</h3><p>One key advantage of the GitHub Models testing platform is the ability to easily compare different AI models. You can test the same queries against multiple models by updating your <code>appsettings.json</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#75715e>// Test with GPT-4o for maximum capability
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#e6db74>&#34;Model&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> <span style=color:#e6db74>&#34;gpt-4o&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Test with GPT-4o-mini for speed and cost
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#e6db74>&#34;Model&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> <span style=color:#e6db74>&#34;gpt-4o-mini&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Test with other available models
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#e6db74>&#34;Model&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> <span style=color:#e6db74>&#34;llama-3.1-405b&#34;</span> <span style=color:#75715e>// Or other available models
</span></span></span></code></pre></div><p>This allows you to evaluate which model provides the best results for your specific energy analysis use case before committing to a production deployment.</p><h2 id=sample-interactions>Sample Interactions</h2><p>Here are some example conversations with your energy assistant:</p><p><strong>Query</strong>: &ldquo;When did I generate the most solar power?&rdquo;</p><p><strong>Response</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>ü§ñ Assistant: Let me check your solar production data. {{tool: peak-solar-day}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>üõ†Ô∏è Tool Result:
</span></span><span style=display:flex><span>‚òÄÔ∏è Peak solar production: 4.2 kWh on 2025-08-01 (Weather: sunny, 23.5¬∞C)
</span></span></code></pre></div><p><strong>Query</strong>: &ldquo;How does cold weather affect my gas usage?&rdquo;</p><p><strong>Response</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>ü§ñ Assistant: I&#39;ll analyse your gas consumption patterns across different temperatures. {{tool: compare-gas}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>üõ†Ô∏è Tool Result:
</span></span><span style=display:flex><span>üî• Average gas usage: 4.10 m¬≥ (cold days &lt; 15¬∞C) vs 2.10 m¬≥ (warm days ‚â• 15¬∞C)
</span></span></code></pre></div><p><strong>Query</strong>: &ldquo;Show me details for August 2nd&rdquo;</p><p><strong>Response</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>ü§ñ Assistant: Here&#39;s your energy breakdown for that day. {{tool: day-details 2025-08-02}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>üõ†Ô∏è Tool Result:
</span></span><span style=display:flex><span>üìä 2025-08-02 Summary:
</span></span><span style=display:flex><span>   Solar: 0.3 kWh
</span></span><span style=display:flex><span>   Grid In: 6.2 kWh
</span></span><span style=display:flex><span>   Grid Out: 0.0 kWh
</span></span><span style=display:flex><span>   Gas: 4.1 m¬≥
</span></span><span style=display:flex><span>   Weather: rainy, 16.0¬∞C
</span></span></code></pre></div><h2 id=security-and-privacy-considerations>Security and Privacy Considerations</h2><h3 id=-data-privacy-by-deployment-mode>üîí Data Privacy by Deployment Mode</h3><p><strong>GitHub Models (Development/Testing Only)</strong>:</p><ul><li><strong>Testing Platform</strong>: Designed for developers to test and compare different AI models</li><li><strong>Model Comparison</strong>: Easy switching between GPT-4o, GPT-4o-mini, and other available models</li><li><strong>Not for Production</strong>: Should not be used with real customer or sensitive data</li><li>Energy data sent to Microsoft&rsquo;s GitHub Models testing infrastructure</li><li>Suitable only for synthetic or anonymised test data</li><li>Use exclusively for proof-of-concept and feature development</li></ul><p><strong>Self-Hosted Ollama (Production)</strong>:</p><ul><li><strong>Complete Data Privacy</strong>: All processing happens locally</li><li><strong>No Data Transmission</strong>: Your energy data never leaves your machine</li><li><strong>No API Keys Required</strong>: No registration with external services</li><li><strong>Full Control</strong>: You own and control your data pipeline</li></ul><h3 id=-cost-comparison>üí∞ Cost Comparison</h3><p><strong>GitHub Models (Development/Testing)</strong>:</p><ul><li>Free testing quota for development and model comparison</li><li><strong>Testing platform only</strong> - compare different models like GPT-4o vs GPT-4o-mini</li><li>No infrastructure setup required for development</li><li>Must transition to production solution for real deployments</li></ul><p><strong>Self-Hosted Ollama (Production)</strong>:</p><ul><li><strong>Zero API Costs</strong>: No per-token billing or subscription fees</li><li><strong>One-Time Setup</strong>: Download model once, use indefinitely</li><li><strong>Scalable</strong>: Process unlimited queries without additional costs</li><li>Infrastructure and maintenance costs</li></ul><h3 id=-compliance-framework>‚öñÔ∏è Compliance Framework</h3><p><strong>Development (GitHub Models Testing Platform)</strong>:</p><ul><li><strong>Development Only</strong>: Never use with real production data</li><li>Use only synthetic test data or completely anonymised datasets</li><li>Perfect for comparing different models (GPT-4o vs GPT-4o-mini vs others)</li><li>Suitable exclusively for feature development and proof-of-concept</li><li>Must migrate to self-hosted solution for any production use</li></ul><p><strong>Production (Self-Hosted Only)</strong>:</p><ul><li><strong>GDPR Compliant</strong>: No personal data processing by third parties</li><li><strong>Enterprise Suitable</strong>: Meets strict data governance requirements</li><li><strong>Audit Friendly</strong>: Complete transparency in data handling</li></ul><h2 id=advanced-extensions>Advanced Extensions</h2><h3 id=weather-integration>Weather Integration</h3><p>Add real-time weather forecasting to predict energy needs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>async</span> Task&lt;<span style=color:#66d9ef>string</span>&gt; GetWeatherForecast()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Integrate with local weather APIs</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Predict solar generation potential</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Suggest optimal energy usage timing</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=smart-home-integration>Smart Home Integration</h3><p>Connect with Home Assistant or IoT devices:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> OptimiseDeviceScheduling()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Schedule high-consumption devices during peak solar</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Recommend heating/cooling adjustments</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Automate based on energy predictions</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=advanced-analytics>Advanced Analytics</h3><p>Implement machine learning for pattern recognition:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>string</span> PredictMonthlyUsage()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Use historical patterns for forecasting</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Identify anomalies in consumption</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Suggest efficiency improvements</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=troubleshooting>Troubleshooting</h2><h3 id=github-models-issues>GitHub Models Issues</h3><p><strong>Authentication Errors</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Verify your token is set</span>
</span></span><span style=display:flex><span>echo $GITHUB_TOKEN  <span style=color:#75715e># Linux/macOS</span>
</span></span><span style=display:flex><span>echo %GITHUB_TOKEN% <span style=color:#75715e># Windows</span>
</span></span></code></pre></div><p><strong>Rate Limiting</strong>:</p><ul><li>Testing quota has monthly limits in testing platform</li><li>Testing platform not suitable for production workloads</li><li>Switch to self-hosted for any production deployment</li></ul><p><strong>Model Availability</strong>:</p><ul><li>Check <a href=https://github.com/marketplace/models target=_blank rel="noopener noreferrer">GitHub Models marketplace</a> for available models to test</li><li>Testing platform - compare models like GPT-4o, GPT-4o-mini, Llama, and others</li></ul><h3 id=ollama-issues>Ollama Issues</h3><p><strong>Connection Failed</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Ensure Ollama is running</span>
</span></span><span style=display:flex><span>ollama list
</span></span><span style=display:flex><span>ollama run gpt-oss:20b
</span></span></code></pre></div><p><strong>Model Download Issues</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check available space and network</span>
</span></span><span style=display:flex><span>ollama pull gpt-oss:20b --verbose
</span></span></code></pre></div><h3 id=configuration-problems>Configuration Problems</h3><p><strong>JSON Parsing Errors</strong>:</p><ul><li>Validate your <code>appsettings.json</code> file structure</li><li>Check for missing commas or brackets</li><li>Use a JSON validator tool</li></ul><p><strong>Missing Data Responses</strong>:</p><ul><li>Verify date formats match exactly (YYYY-MM-DD)</li><li>Ensure all required fields are present</li><li>Check for typos in property names</li></ul><h3 id=performance-optimization>Performance Optimization</h3><p><strong>GitHub Models (Development/Testing)</strong>:</p><ul><li>Use appropriate model size for your development testing</li><li>Testing platform only - compare different models (GPT-4o vs GPT-4o-mini)</li><li>Implement response caching for repeated development queries</li><li>Transition to self-hosted for any production deployment</li></ul><p><strong>Self-Hosted Ollama</strong>:</p><ul><li>Monitor system resources (CPU, Memory, GPU)</li><li>Adjust model parameters for your hardware</li><li>Use appropriate quantization levels</li></ul><h2 id=best-practices>Best Practices</h2><h3 id=data-management>Data Management</h3><ul><li><strong>Regular Backups</strong>: Keep copies of your energy data</li><li><strong>Data Validation</strong>: Implement checks for reasonable values</li><li><strong>Incremental Updates</strong>: Add new data without regenerating everything</li></ul><h3 id=performance-optimisation>Performance Optimisation</h3><ul><li><strong>Data Caching</strong>: Load JSON once and cache in memory</li><li><strong>Batch Processing</strong>: Group multiple queries efficiently</li><li><strong>Resource Monitoring</strong>: Watch CPU and memory usage</li></ul><h3 id=model-management>Model Management</h3><ul><li><strong>Version Control</strong>: Track which model versions work best</li><li><strong>Fine-tuning</strong>: Consider domain-specific model training</li><li><strong>Fallback Options</strong>: Have backup models available</li></ul><h2 id=advanced-gpt-oss-features>Advanced GPT-OSS Features</h2><h3 id=configurable-reasoning-levels>Configurable Reasoning Levels</h3><p>GPT-OSS offers three reasoning levels that you can adjust based on your query complexity:</p><ul><li><strong>Low</strong>: Fast responses for simple data lookups and general questions</li><li><strong>Medium</strong>: Balanced speed and detail for typical energy analysis queries</li><li><strong>High</strong>: Deep, detailed analysis for complex pattern recognition and optimization</li></ul><p>You can control this by adding a reasoning level to your system prompts:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>var</span> systemPrompt = <span style=color:#e6db74>@&#34;You are an energy assistant. Reasoning: high
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Analyze the user&#39;s energy data and provide detailed insights about consumption patterns.&#34;</span>;
</span></span></code></pre></div><h3 id=chain-of-thought-visibility>Chain-of-Thought Visibility</h3><p>Unlike cloud-based models, GPT-OSS provides complete access to its reasoning process, making it easier to:</p><ul><li><strong>Debug Responses</strong>: Understand how the model reached its conclusions</li><li><strong>Build Trust</strong>: See the logical steps in energy recommendations</li><li><strong>Improve Accuracy</strong>: Identify and correct reasoning errors</li><li><strong>Learn Insights</strong>: Understand energy analysis methodologies</li></ul><h2 id=conclusion>Conclusion</h2><p>You now have a flexible, production-ready AI energy assistant that adapts to your deployment needs:</p><ul><li><strong>üß™ Development</strong>: Use GitHub Models testing platform for rapid prototyping and model comparison (development only)</li><li><strong>üè≠ Production</strong>: Deploy with self-hosted Ollama for privacy and production use</li><li><strong>üîÑ Migration Path</strong>: Easy transition from model testing to production deployment</li></ul><p>This architecture demonstrates how modern .NET applications can leverage testing platforms for development and model comparison, then transition to self-hosted solutions for production, ensuring you never deploy testing infrastructure to production.</p><p>The combination of C#, configurable LLM providers, and custom tooling creates a powerful foundation for energy management that scales from proof-of-concept testing to enterprise production deployment.</p><p>Whether you&rsquo;re optimising solar usage, reducing gas consumption, or understanding energy patterns, this assistant provides intelligent insights while giving you complete control over your data and infrastructure.</p><h2 id=next-steps>Next Steps</h2><ul><li><strong>üîß Configuration Management</strong>: Implement environment-specific settings for different deployment stages</li><li><strong>üìä Enhanced Visualisation</strong>: Build a Blazor front-end with charts and dashboards</li><li><strong>üîó Real-time Integration</strong>: Connect with smart meter APIs and IoT devices for live updates</li><li><strong>ü§ñ Advanced AI</strong>: Implement model comparison and A/B testing capabilities</li><li><strong>üè¢ Enterprise Features</strong>: Add multi-tenant support and advanced security</li><li><strong>üì± Mobile Support</strong>: Create companion mobile apps with offline sync</li></ul><h2 id=additional-resources>Additional Resources</h2><ul><li><a href=https://docs.github.com/en/github-models target=_blank rel="noopener noreferrer">GitHub Models Documentation</a></li><li><a href=https://github.com/marketplace/models target=_blank rel="noopener noreferrer">GitHub Models Marketplace</a></li><li><a href=https://huggingface.co/openai/gpt-oss-20b target=_blank rel="noopener noreferrer">GPT-OSS Model Card & Documentation</a></li><li><a href=https://openai.com/index/introducing-gpt-oss/ target=_blank rel="noopener noreferrer">OpenAI GPT-OSS Official Blog</a></li><li><a href=https://cookbook.openai.com/topic/gpt-oss target=_blank rel="noopener noreferrer">GPT-OSS Cookbook & Guides</a></li><li><a href=https://github.com/openai/harmony target=_blank rel="noopener noreferrer">Harmony Response Format</a></li><li><a href=https://ollama.com/docs target=_blank rel="noopener noreferrer">Ollama Documentation</a></li><li><a href=https://learn.microsoft.com/en-us/dotnet/core/extensions/configuration target=_blank rel="noopener noreferrer">.NET Configuration Guide</a></li><li><a href=https://learn.microsoft.com/en-us/dotnet/standard/serialization/system-text-json/overview target=_blank rel="noopener noreferrer">.NET JSON Handling Guide</a></li><li><a href=https://www.gov.uk/guidance/smart-meter-data target=_blank rel="noopener noreferrer">Smart Meter Data Formats</a></li><li><a href=https://www.home-assistant.io/ target=_blank rel="noopener noreferrer">Home Energy Management Systems</a></li></ul></div><div class="d-flex align-items-center flex-wrap"><span class=mx-1><i class="fas fa-folder"></i></span>
<a href=https://quintelier.dev/categories/dotnet-development/><span class="badge rounded-pill bg-secondary mx-1">DotNET Development</span></a>
<a href=https://quintelier.dev/categories/ai/><span class="badge rounded-pill bg-secondary mx-1">AI</span></a>
<a href=https://quintelier.dev/categories/machine-learning/><span class="badge rounded-pill bg-secondary mx-1">Machine Learning</span></a>
<a href=https://quintelier.dev/categories/privacy/><span class="badge rounded-pill bg-secondary mx-1">Privacy</span></a>
<a href=https://quintelier.dev/categories/security/><span class="badge rounded-pill bg-secondary mx-1">Security</span></a></div><div class="d-flex align-items-center flex-wrap"><span class=mx-1><i class="fas fa-tags"></i></span>
<a href=https://quintelier.dev/tags/csharp/><span class="badge rounded-pill bg-success mx-1">CSharp</span></a>
<a href=https://quintelier.dev/tags/dotnet/><span class="badge rounded-pill bg-success mx-1">DotNET</span></a>
<a href=https://quintelier.dev/tags/ai/><span class="badge rounded-pill bg-success mx-1">AI</span></a>
<a href=https://quintelier.dev/tags/local-llm/><span class="badge rounded-pill bg-success mx-1">Local LLM</span></a>
<a href=https://quintelier.dev/tags/rag/><span class="badge rounded-pill bg-success mx-1">RAG</span></a>
<a href=https://quintelier.dev/tags/gpt-oss/><span class="badge rounded-pill bg-success mx-1">GPT-OSS</span></a>
<a href=https://quintelier.dev/tags/energy-management/><span class="badge rounded-pill bg-success mx-1">Energy Management</span></a>
<a href=https://quintelier.dev/tags/privacy/><span class="badge rounded-pill bg-success mx-1">Privacy</span></a>
<a href=https://quintelier.dev/tags/tool-calling/><span class="badge rounded-pill bg-success mx-1">Tool Calling</span></a>
<a href=https://quintelier.dev/tags/console-application/><span class="badge rounded-pill bg-success mx-1">Console Application</span></a></div><div class="col-lg-6 mt-3 mb-3 mx-auto text-center"><script type=text/javascript src=https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js data-name=bmc-button data-slug=sujithq data-color=#6a1c56 data-emoji data-font=Cookie data-text="Enjoyed it? Fuel my coffee" data-outline-color=#ffffff data-font-color=#ffffff data-coffee-color=#FFDD00></script></div><div class="col-lg-6 mt-3 mb-3 mx-auto text-center"><a href="https://gitads.dev/v1/ad-track?source=sujithq/sujithq.github.io@github" target=_blank rel=noopener class=d-inline-block><img src="https://gitads.dev/v1/ad-serve?source=sujithq/sujithq.github.io@github" alt="Sponsored by GitAds" class="img-fluid rounded mx-auto d-block"></a></div></div></div><div class="card border-0 mt-3"><div class=card-body><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//sujithq.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></div></div></main><footer class=footer><div class="container-fluid bg-primary copyright text-center mt-4"><p>¬© <span>Copyright 2018-Present</span>
<strong class="px-1 sitename">Sujith Quintelier</strong>
<span>All Rights Reserved</span>
‚Ä¢ <a href=/index.xml class=text-white title="RSS Feed"><i class="fas fa-rss"></i> RSS</a></p><p>Based on <a href=https://getbootstrap.com/ rel=nofollow>Bootstrap</a>. Icons from <a href=https://icons.getbootstrap.com/ rel=nofollow>Bootstrap Icons</a> and <a href=https://fontawesome.com/ rel=nofollow>Font Awesome</a>. Web fonts from <a href=https://fonts.google.com/ rel=nofollow>Google</a>.</p></div></footer><a href=# id=scroll-top class="scroll-top d-flex align-items-center justify-content-center active"><i class="fas fa-arrow-up"></i></a><div id=preloader></div><div id=source-modal class="modal fade" tabindex=-1 style=display:none aria-hidden=true><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class="modal-title me-3">Source Code</h4><button type=button class="btn btn-primary btn-copy"><i class="fas fa-clipboard"></i> Copy Code</button></div><div class=modal-body><pre class=language-html><code></code></pre></div></div></div></div><script>window.HUGO_ENV="";var availableThemes=JSON.parse('["dark","light"]')</script><script src=/vendor/bootstrap/js/bootstrap.bundle.min.e4fd49181388c48ec5040bd3fe66f57c29c8e67fcd8502b3354b96ec7ab47cc7.js integrity="sha256-5P1JGBOIxI7FBAvT/mb1fCnI5n/NhQKzNUuW7Hq0fMc=" crossorigin=anonymous></script><script src=/vendor/aos/js/aos.a5005b2e414770fd5ccb40bc221a12771966d02b5c1f9c89da48bd8e3811d377.js integrity="sha256-pQBbLkFHcP1cy0C8IhoSdxlm0CtcH5yJ2ki9jjgR03c=" crossorigin=anonymous></script><script>function aosInit(){AOS.init({duration:600,easing:"ease-in-out",once:!0,mirror:!1})}window.addEventListener("DOMContentLoaded",aosInit)</script><script src=/vendor/swiper/js/swiper-bundle.min.73203b5c5f70f45b31428e9c82d30645ef407717ed84e732b32f96ab848f0a7f.js integrity="sha256-cyA7XF9w9FsxQo6cgtMGRe9AdxfthOcysy+Wq4SPCn8=" crossorigin=anonymous></script><script src=/vendor/prismjs/js/prism-core.min.6caad316dd991f24f8004e0b9c19c055cb5829ff65e973fbee406f96d81b8e7e.js integrity="sha256-bKrTFt2ZHyT4AE4LnBnAVctYKf9l6XP77kBvltgbjn4=" crossorigin=anonymous></script><script src=/vendor/prismjs/js/prism-autoloader.min.0233342795c86e2079f7406bce72c481918b9ce416aedeb6b37044abae50fc8d.js integrity="sha256-AjM0J5XIbiB590BrznLEgZGLnOQWrt62s3BEq65Q/I0=" crossorigin=anonymous></script><script src=/ts/main.f51f4656145ceb2ef15f082a7588110128f74f3f1c55c9b988e96b2054a44bf2.js integrity="sha256-9R9GVhRc6y7xXwgqdYgRASj3Tz8cVcm5iOlrIFSkS/I=" crossorigin=anonymous></script><script src=https://kit.fontawesome.com/5fc2d9cacb.js crossorigin=anonymous></script><script src=/js/main.6c5e9a54b8d04f61fd138df3018703ea5f5b3fa185314df76ca6c21c786cdcf7.js integrity="sha256-bF6aVLjQT2H9E43zAYcD6l9bP6GFMU33bKbCHHhs3Pc=" crossorigin=anonymous></script><script src=https://analytics.ahrefs.com/analytics.js data-key=zFn6YUC1ofEcLJXv92lDUA async></script><script src=https://d3js.org/d3.v7.min.js></script><script src=/tech-radar/js/radar.2bfc0b17e82f5916016dae4442d156cded838e55a28df36c5408235ed750d405.js integrity="sha256-K/wLF+gvWRYBba5EQtFWze2DjlWijfNsVAgjXtdQ1AU=" crossorigin=anonymous></script><script src=/js/mermaid-init.a08987413c413404b8adfd2826c40349a5e23e0492e868511648790a0b72ef85.js integrity="sha256-oImHQTxBNAS4rf0oJsQDSaXiPgSS6GhRFkh5Cgty74U=" crossorigin=anonymous></script></body></html>