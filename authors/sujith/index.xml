<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Sujith Quintelier</title><link>/authors/sujith/</link><atom:link href="/authors/sujith/index.xml" rel="self" type="application/rss+xml"/><description>Sujith Quintelier</description><generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>Â©2022</copyright><image><url>/img/Quintelier_Sujith</url><title>Sujith Quintelier</title><link>/authors/sujith/</link></image><item><title>Azure Load Balancing options</title><link>/post/2022-06-17-azure-load-balancing-options/</link><pubDate>Fri, 17 Jun 2022 06:00:00 +0000</pubDate><guid>/post/2022-06-17-azure-load-balancing-options/</guid><description>&lt;p>The term load balancing refers to the even distribution of workloads (that is, incoming network traffic), across a group of backend computing resources or servers. Load balancing aims to optimize resource use, maximize throughput, minimize response time, and avoid overloading any single resource. It can also improve availability by sharing a workload across redundant computing resources.&lt;/p>
&lt;h2 id="options">Options&lt;/h2>
&lt;ul>
&lt;li>Azure Load Balancer&lt;/li>
&lt;li>Traffic Manager&lt;/li>
&lt;li>Azure Application Gateway&lt;/li>
&lt;li>Azure Front Door&lt;/li>
&lt;/ul>
&lt;h3 id="azure-load-balancer">Azure Load Balancer&lt;/h3>
&lt;p>&lt;img src="img/azure-load-balancer.png" alt="Azure Load Balancer">&lt;/p>
&lt;p>High-performance, ultra-low-latency &lt;strong>Layer 4&lt;/strong> load-balancing service (inbound and outbound) for all &lt;strong>UDP&lt;/strong> and &lt;strong>TCP&lt;/strong> protocols. It is built to handle millions of requests per second while ensuring your solution is highly available. Azure Load Balancer is &lt;strong>zone-redundant&lt;/strong>, ensuring high availability across &lt;strong>Availability Zones&lt;/strong>.&lt;/p>
&lt;h3 id="traffic-manager">Traffic Manager&lt;/h3>
&lt;p>&lt;img src="img/azure-traffic-manager.png" alt="Azure Traffic Manager">&lt;/p>
&lt;p>&lt;strong>DNS-based&lt;/strong> traffic load balancer that enables you to distribute traffic optimally to services across &lt;strong>global Azure regions&lt;/strong>, while providing high availability and responsiveness. Because Traffic Manager is a DNS-based load-balancing service, it load-balances only at the &lt;strong>domain level&lt;/strong>. For that reason, it can&amp;rsquo;t fail over as quickly as Front Door, because of common challenges around DNS caching and systems not honoring DNS time-to-live values (TTLs).&lt;/p>
&lt;h3 id="azure-application-gateway">Azure Application Gateway&lt;/h3>
&lt;p>&lt;img src="img/azure-application-gateway.png" alt="Azure Application Gateway">&lt;/p>
&lt;p>Provides application delivery controller (ADC) as a service, offering various &lt;strong>Layer 7&lt;/strong> load-balancing capabilities. Use it to optimize web farm productivity by &lt;strong>offloading&lt;/strong> CPU-intensive &lt;strong>SSL termination&lt;/strong> to the gateway.&lt;/p>
&lt;h3 id="azure-front-door">Azure Front Door&lt;/h3>
&lt;p>&lt;img src="img/azure-front-door.png" alt="Azure Front Door">&lt;/p>
&lt;p>Application delivery network that provides &lt;strong>global&lt;/strong> load balancing and site acceleration service for &lt;strong>web applications&lt;/strong>. It offers &lt;strong>Layer 7&lt;/strong> capabilities for your application like &lt;strong>SSL offload&lt;/strong>, &lt;strong>path-based routing&lt;/strong>, fast failover, caching, etc. to improve performance and high-availability of your applications.&lt;/p>
&lt;h2 id="global-vs-regional">Global vs regional&lt;/h2>
&lt;p>&lt;strong>Global&lt;/strong> load-balancing services distribute traffic across regional backends, clouds, or hybrid on-premises services. These services route end-user traffic to the closest available backend. They also react to changes in service reliability or performance, in order to maximize availability and performance. You can think of them as systems that load balance between application stamps, endpoints, or scale-units hosted across different regions/geographies.&lt;/p>
&lt;p>In contrast, &lt;strong>Regional&lt;/strong> load-balancing services distribute traffic within virtual networks across virtual machines (VMs) or zonal and zone-redundant service endpoints within a region. You can think of them as systems that load balance between VMs, containers, or clusters within a region in a virtual network.&lt;/p>
&lt;h2 id="https-vs-non-https">HTTP(S) vs non-HTTP(S)&lt;/h2>
&lt;p>&lt;strong>HTTP(S)&lt;/strong> load-balancing services are Layer 7 load balancers that only accept HTTP(S) traffic. They are intended for web applications or other HTTP(S) endpoints. They include features such as SSL offload, web application firewall, path-based load balancing, and session affinity.&lt;/p>
&lt;p>In contrast, &lt;strong>non-HTTP(S)&lt;/strong> load-balancing services can handle non-HTTP(S) traffic and are recommended for non-web workloads.&lt;/p>
&lt;h2 id="summary">Summary&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Service&lt;/th>
&lt;th>Global/regional&lt;/th>
&lt;th>Recommended traffic&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Azure Front Door&lt;/td>
&lt;td>Global&lt;/td>
&lt;td>HTTP(S)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Traffic Manager&lt;/td>
&lt;td>Global&lt;/td>
&lt;td>non-HTTP(S)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Application Gateway&lt;/td>
&lt;td>Regional&lt;/td>
&lt;td>HTTP(S)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Azure Load Balancer&lt;/td>
&lt;td>Regional&lt;/td>
&lt;td>non-HTTP(S)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="choosing-a-load-balancing-option">Choosing a load balancing option&lt;/h2>
&lt;p>&lt;img src="img/load-balancing-decision-tree.png" alt="Load Balancing Decision Tree">&lt;/p></description></item><item><title>Illegal option when executing a script</title><link>/post/wsl-illegal-option/</link><pubDate>Fri, 29 Apr 2022 10:00:00 +0000</pubDate><guid>/post/wsl-illegal-option/</guid><description>&lt;p>Sometimes when you run a script, you get this this error like &lt;code>set: Illegal option -&lt;/code>:&lt;/p>
&lt;p>Run&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">sh filename
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Error&lt;/p>
&lt;pre>&lt;code class="language-console" data-lang="console">: not found: 2:
: not found: 4:
filename: 6: set: Illegal option -
&lt;/code>&lt;/pre>&lt;p>This means there is something wrong with the line endings in your script. This can easily be resolved by running this:&lt;/p>
&lt;p>Run&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">sed -i &lt;span style="color:#e6db74">&amp;#39;s/\r$//&amp;#39;&lt;/span> filename
&lt;/code>&lt;/pre>&lt;/div>&lt;p>After that rerun your script.&lt;/p></description></item><item><title>Update, Upgrade and Clean WSL</title><link>/post/wsl-update/</link><pubDate>Fri, 29 Apr 2022 09:00:00 +0000</pubDate><guid>/post/wsl-update/</guid><description>&lt;p>When you are using WSL, once in a while you get this message at start up stating your environment is out of date:&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.10.102.1-microsoft-standard-WSL2 x86_64)
* Documentation: https://help.ubuntu.com
* Management: https://landscape.canonical.com
* Support: https://ubuntu.com/advantage
System information as of Thu Apr 28 08:26:12 CEST 2022
System load: 0.0 Processes: 8
Usage of /: 11.0% of 250.98GB Users logged in: 0
Memory usage: 1% IPv4 address for eth0: 172.31.68.164
Swap usage: 0%
0 updates can be applied immediately.
The list of available updates is more than a week old.
To check for new updates run: sudo apt update
This message is shown once a day. To disable it please create the
/home/&amp;lt;username&amp;gt;/.hushlogin file.
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could run this set of commands or this one line to update your WSL&lt;/p>
&lt;p>Set&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">sudo apt-get update -y
sudo apt-get upgrade -y
sudo apt-get autoremove -y
sudo apt-get clean -y
&lt;/code>&lt;/pre>&lt;/div>&lt;p>One line&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">sudo apt-get update -y &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> sudo apt-get upgrade -y &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> sudo apt-get autoremove -y &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> sudo apt-get clean -y
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can actually create a script &lt;strong>wsl-update.sh&lt;/strong> in the user&amp;rsquo;s root folder and just execute it using &lt;code>sh ~/wsl-update.sh&lt;/code>&lt;/p>
&lt;p>Use this script to create wsl-update.sh and make it executable.&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">cat &lt;span style="color:#e6db74">&amp;lt;&amp;lt;EOT &amp;gt;&amp;gt; ~/wsl-update.sh
&lt;/span>&lt;span style="color:#e6db74">#!/bin/sh
&lt;/span>&lt;span style="color:#e6db74">sudo apt-get update -y &amp;amp;&amp;amp; sudo apt-get upgrade -y &amp;amp;&amp;amp; sudo apt-get autoremove -y &amp;amp;&amp;amp; sudo apt-get clean -y
&lt;/span>&lt;span style="color:#e6db74">EOT&lt;/span>
chmod +X ~/wsl-update.sh
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Update post</title><link>/post/update/</link><pubDate>Thu, 28 Apr 2022 09:00:00 +0000</pubDate><guid>/post/update/</guid><description>&lt;p>It has been a while since my last post but I am working on new content. In the beginning it will be just some short notes about things happened in the past week.&lt;/p></description></item><item><title>Setup Blazor development environment</title><link>/post/setupblazordevenv/</link><pubDate>Thu, 12 Jul 2018 10:00:00 +0000</pubDate><guid>/post/setupblazordevenv/</guid><description>&lt;p>This guide helps you set up your &lt;a href="https://blazor.net/">Blazor&lt;/a> development environment without messing up your current development machine with beta releases.&lt;/p>
&lt;p>We will use these tools&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://www.docker.com/community-edition">Docker Community Edition&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://code.visualstudio.com/">Visual Studio Code&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h1 id="lets-get-started">Let&amp;rsquo;s get started&lt;/h1>
&lt;p>Create a local directory with one subdirectory named &amp;ldquo;app&amp;rdquo;.&lt;/p>
&lt;p>&lt;img src="img/create_directory.png" alt="">&lt;/p>
&lt;h1 id="create-dockerfile">Create Dockerfile&lt;/h1>
&lt;p>First download the latest &lt;a href="https://hub.docker.com/r/microsoft/dotnet/" title="dockerfile">dockerfile&lt;/a> version.
Look at the latest version of &lt;a href="https://github.com/dotnet/dotnet-docker/blob/master/2.1/sdk/stretch/amd64/Dockerfile">Linux amd64&lt;/a>.
Copy the raw content and store it in a file Dockerfile. Modify it by appending &lt;code> \&lt;/code> and &lt;code>&amp;amp;&amp;amp; dotnet new -i Microsoft.AspNetCore.Blazor.Templates&lt;/code> at the second RUN command.&lt;/p>
&lt;p>It should look like this:&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">RUN curl -SL --output dotnet.tar.gz https://dotnetcli.blob.core.windows.net/dotnet/Sdk/$DOTNET_SDK_VERSION/dotnet-sdk-$DOTNET_SDK_VERSION-linux-x64.tar.gz &lt;span style="color:#ae81ff">\
&lt;/span>
&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> dotnet_sha512&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;2166986e360f1c3456a33723edb80349e6ede115be04a6331bfbfd0f412494684d174a0cfb21d2feb00d509ce342030160a4b5b445e393ad83bedb613a64bc66&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>
&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> sha512sum dotnet.tar.gz &lt;span style="color:#ae81ff">\
&lt;/span>
&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$dotnet_sha512&lt;span style="color:#e6db74"> dotnet.tar.gz&amp;#34;&lt;/span> | sha512sum -c - &lt;span style="color:#ae81ff">\
&lt;/span>
&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> mkdir -p /usr/share/dotnet &lt;span style="color:#ae81ff">\
&lt;/span>
&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> tar -zxf dotnet.tar.gz -C /usr/share/dotnet &lt;span style="color:#ae81ff">\
&lt;/span>
&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> rm dotnet.tar.gz &lt;span style="color:#ae81ff">\
&lt;/span>
&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> ln -s /usr/share/dotnet/dotnet /usr/bin/dotnet &lt;span style="color:#ae81ff">\
&lt;/span>
&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> dotnet new -i Microsoft.AspNetCore.Blazor.Templates
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="create-the-docker-image">Create the docker image&lt;/h1>
&lt;p>Open a terminal and go to the location of the Dockerfile and run &lt;code>docker build -t blazor:latest .&lt;/code>. This will build the docker image.&lt;/p>
&lt;p>If this fails, just restart your docker and rerun previous command.&lt;/p>
&lt;h2 id="build">build&lt;/h2>
&lt;p>This builds the image.&lt;/p>
&lt;h2 id="-t">-t&lt;/h2>
&lt;p>This adds a label &lt;code>latest&lt;/code>.&lt;/p>
&lt;h2 id="verify">verify&lt;/h2>
&lt;p>The creation of the image can be verified by &lt;code>docker images&lt;/code>
You should see 2 images. Base image and the one you just created.&lt;/p>
&lt;p>&lt;img src="img/docker_images.png" alt="">&lt;/p>
&lt;h1 id="start-a-container-instance">Start a container instance&lt;/h1>
&lt;p>At the prompt run &lt;code>docker run -it --rm --name blazortest -p 8000:80 -v H:\Euricom\Blazor\app\:/app -w=&amp;quot;/app&amp;quot; blazor:latest&lt;/code>&lt;/p>
&lt;h2 id="run">run&lt;/h2>
&lt;p>This runs the container:&lt;/p>
&lt;h2 id="-it">-it&lt;/h2>
&lt;p>This runs an interactive container.&lt;/p>
&lt;h2 id="--rm">&amp;ndash;rm&lt;/h2>
&lt;p>This removes the container after stopping the container.&lt;/p>
&lt;h2 id="-p">-p&lt;/h2>
&lt;p>This maps the internal port (80) to an external port (8000).&lt;/p>
&lt;h2 id="-v">-v&lt;/h2>
&lt;p>This maps a local path &lt;code>H:\Euricom\Blazor\app\&lt;/code> to this volume &lt;code>/app&lt;/code>&lt;/p>
&lt;h2 id="-w">-w&lt;/h2>
&lt;p>This sets the working directory to &lt;code>/app&lt;/code>&lt;/p>
&lt;h2 id="verify-1">verify&lt;/h2>
&lt;p>In another terminal you should see named instance blazortest&lt;/p>
&lt;p>&lt;img src="img/docker_running_instances.png" alt="">&lt;/p>
&lt;h1 id="create-a-new-blazor-project">Create a new blazor project&lt;/h1>
&lt;p>You can create a new Blazor project the volume created earlier by running this command &lt;code>dotnet new blazor&lt;/code>.&lt;/p>
&lt;p>Open the project file app.csproj and add this node &lt;code>&amp;lt;Watch Include=&amp;quot;**\*.cshtml&amp;quot; /&amp;gt;&lt;/code>. This makes it possible to make changes on the fly.&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-xml" data-lang="xml">&lt;span style="color:#f92672">&amp;lt;Project&lt;/span> &lt;span style="color:#a6e22e">Sdk=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Microsoft.NET.Sdk.Web&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;PropertyGroup&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;TargetFramework&amp;gt;&lt;/span>netstandard2.0&lt;span style="color:#f92672">&amp;lt;/TargetFramework&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;RunCommand&amp;gt;&lt;/span>dotnet&lt;span style="color:#f92672">&amp;lt;/RunCommand&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;RunArguments&amp;gt;&lt;/span>blazor serve&lt;span style="color:#f92672">&amp;lt;/RunArguments&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;LangVersion&amp;gt;&lt;/span>7.3&lt;span style="color:#f92672">&amp;lt;/LangVersion&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;/PropertyGroup&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;ItemGroup&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;PackageReference&lt;/span> &lt;span style="color:#a6e22e">Include=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Microsoft.AspNetCore.Blazor.Browser&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">Version=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;0.4.0&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;PackageReference&lt;/span> &lt;span style="color:#a6e22e">Include=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Microsoft.AspNetCore.Blazor.Build&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">Version=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;0.4.0&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;DotNetCliToolReference&lt;/span> &lt;span style="color:#a6e22e">Include=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Microsoft.AspNetCore.Blazor.Cli&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">Version=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;0.4.0&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;Watch&lt;/span> &lt;span style="color:#a6e22e">Include=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;**\*.cshtml&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;/ItemGroup&amp;gt;&lt;/span>
&lt;span style="color:#f92672">&amp;lt;/Project&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="start-the-application">Start the application&lt;/h1>
&lt;p>Start the application via &lt;code>dotnet watch run&lt;/code>&lt;/p>
&lt;p>&lt;img src="img/dotnet_watch_run.png" alt="">&lt;/p>
&lt;h1 id="launch-the-application">Launch the application&lt;/h1>
&lt;p>Open a browser and launch &lt;code>http://localhost:8000&lt;/code>&lt;/p>
&lt;p>&lt;img src="img/launch_chrome.png" alt="" title="Chrome">
&lt;img src="img/launch_edge.png" alt="" title="Edge">
&lt;img src="img/launch_ff.png" alt="" title="Firefox">&lt;/p></description></item><item><title>Create, build and deploy Azure Functions with Visual Studio, Teamcity and Octopus Deploy</title><link>/post/createbuildazfvstcod/</link><pubDate>Fri, 22 Jun 2018 10:00:00 +0000</pubDate><guid>/post/createbuildazfvstcod/</guid><description>&lt;p>Following this note you will be able to Create, Build and Deploy a simple Azure Function App. You create it in Visual Studio. Let it build with Teamcity and deploy it with Octopus Deploy. The needed Azure Resources will also be deployed.&lt;/p>
&lt;h1 id="setup">Setup&lt;/h1>
&lt;h2 id="tools">Tools&lt;/h2>
&lt;ul>
&lt;li>Visual Studio 2017 v15.7.4 (VS).&lt;/li>
&lt;li>TeamCity v2017.2.4 (TC).&lt;/li>
&lt;li>Octopus Deploy v2018.6.2 (OD).&lt;/li>
&lt;/ul>
&lt;p>For this purpose I deployed a Azure VM using this [template] (&lt;a href="https://portal.azure.com/#create/octopus.octopusdeployoctopus-deploy),">https://portal.azure.com/#create/octopus.octopusdeployoctopus-deploy),&lt;/a> installed an OD Tentacle, a TC Agent and OD cli (in &lt;code>C:\Programs\Octo&lt;/code>). OD downloads can be found [here] (&lt;a href="https://octopus.com/downloads)">https://octopus.com/downloads)&lt;/a>. Also install the correct .NET version via this [link] (&lt;a href="https://www.microsoft.com/web/downloads/platform.aspx">https://www.microsoft.com/web/downloads/platform.aspx&lt;/a>) and set the DOTNET_HOME environment variable in TC to &lt;code>C:\Program Files\dotnet\&lt;/code>&lt;/p>
&lt;p>Make sure you have installed the Azure development workload in VS. Check via TOOLS\Get Tools and Features&amp;hellip;
&lt;img src="img/ZuinKne.png" alt="">&lt;/p>
&lt;p>On Workloads tab check Azure development&lt;/p>
&lt;p>&lt;img src="img/oojIgPk.png" alt="">&lt;/p>
&lt;h1 id="create">Create&lt;/h1>
&lt;p>We use VS for developing the Function. Store the project in a source control system supported by TC.&lt;/p>
&lt;h2 id="function">Function&lt;/h2>
&lt;p>Add new Project, search for Azure Functions and give it a name. It is a basic http trigger. Nothing fancy. Modify if needed.&lt;/p>
&lt;p>Install Nuget package &lt;code>Microsoft.NET.Sdk.Functions&lt;/code>.&lt;/p>
&lt;h2 id="arm-template">ARM Template&lt;/h2>
&lt;p>Deploying an Azure Function needs 3 Azure Resources:&lt;/p>
&lt;ul>
&lt;li>Storage Account (Microsoft.Storage/storageAccounts)&lt;/li>
&lt;li>Hosting Plan (Microsoft.We&lt;!-- raw HTML omitted -->b/serverfarms)&lt;/li>
&lt;li>Function App (Microsoft.We&lt;!-- raw HTML omitted -->b/sites)&lt;/li>
&lt;/ul>
&lt;p>Below you will find a basic ARM Template with these 3 resources and a parameters Template. Set Copy to Output Directory to &lt;code>Copy if Newer&lt;/code>. Add those templates to your project and name them azuredeploy.json and azuredeploy.parameters.json.&lt;/p>
&lt;p>The project structure should look like&lt;/p>
&lt;p>&lt;img src="img/2yV3WSe.png" alt="">&lt;/p>
&lt;h3 id="template">Template&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> {
&lt;span style="color:#f92672">&amp;#34;$schema&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;contentVersion&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;1.0.0.0&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;parameters&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;appName&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;string&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;metadata&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;description&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;The name of the function app that you wish to create.&amp;#34;&lt;/span>
}
},
&lt;span style="color:#f92672">&amp;#34;sku&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;string&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;allowedValues&amp;#34;&lt;/span>: [
&lt;span style="color:#e6db74">&amp;#34;Free&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;Shared&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;Basic&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;Standard&amp;#34;&lt;/span>
],
&lt;span style="color:#f92672">&amp;#34;defaultValue&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Standard&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;metadata&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;description&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;The pricing tier for the hosting plan.&amp;#34;&lt;/span>
}
},
&lt;span style="color:#f92672">&amp;#34;workerSize&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;string&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;allowedValues&amp;#34;&lt;/span>: [
&lt;span style="color:#e6db74">&amp;#34;0&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;1&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;2&amp;#34;&lt;/span>
],
&lt;span style="color:#f92672">&amp;#34;defaultValue&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;0&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;metadata&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;description&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;The instance size of the hosting plan (small, medium, or large).&amp;#34;&lt;/span>
}
},
&lt;span style="color:#f92672">&amp;#34;storageAccountType&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;string&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;defaultValue&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Standard_LRS&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;allowedValues&amp;#34;&lt;/span>: [
&lt;span style="color:#e6db74">&amp;#34;Standard_LRS&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;Standard_GRS&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;Standard_RAGRS&amp;#34;&lt;/span>
],
&lt;span style="color:#f92672">&amp;#34;metadata&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;description&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Storage Account type&amp;#34;&lt;/span>
}
},
&lt;span style="color:#f92672">&amp;#34;location&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;string&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;defaultValue&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[resourceGroup().location]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;metadata&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;description&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Location for all resources.&amp;#34;&lt;/span>
}
}
},
&lt;span style="color:#f92672">&amp;#34;variables&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;functionAppName&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[parameters(&amp;#39;appName&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;hostingPlanName&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[parameters(&amp;#39;appName&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;storageAccountName&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[concat(uniquestring(resourceGroup().id), &amp;#39;functions&amp;#39;)]&amp;#34;&lt;/span>
},
&lt;span style="color:#f92672">&amp;#34;resources&amp;#34;&lt;/span>: [
{
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Microsoft.Storage/storageAccounts&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[variables(&amp;#39;storageAccountName&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;apiVersion&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;2016-12-01&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;location&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[parameters(&amp;#39;location&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;kind&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Storage&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;sku&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[parameters(&amp;#39;storageAccountType&amp;#39;)]&amp;#34;&lt;/span>
}
},
{
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Microsoft.Web/serverfarms&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;apiVersion&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;2015-04-01&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[variables(&amp;#39;hostingPlanName&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;location&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[parameters(&amp;#39;location&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;properties&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[variables(&amp;#39;hostingPlanName&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;sku&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[parameters(&amp;#39;sku&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;workerSize&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[parameters(&amp;#39;workerSize&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;hostingEnvironment&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;numberOfWorkers&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>
}
},
{
&lt;span style="color:#f92672">&amp;#34;apiVersion&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;2015-04-01&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Microsoft.Web/sites&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[variables(&amp;#39;functionAppName&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;location&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[parameters(&amp;#39;location&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;kind&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;functionapp&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;properties&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[variables(&amp;#39;functionAppName&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;serverFarmId&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[resourceId(&amp;#39;Microsoft.Web/serverfarms&amp;#39;, variables(&amp;#39;hostingPlanName&amp;#39;))]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;hostingEnvironment&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;clientAffinityEnabled&amp;#34;&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;siteConfig&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;alwaysOn&amp;#34;&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
}
},
&lt;span style="color:#f92672">&amp;#34;dependsOn&amp;#34;&lt;/span>: [
&lt;span style="color:#e6db74">&amp;#34;[resourceId(&amp;#39;Microsoft.Web/serverfarms&amp;#39;, variables(&amp;#39;hostingPlanName&amp;#39;))]&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;[resourceId(&amp;#39;Microsoft.Storage/storageAccounts&amp;#39;, variables(&amp;#39;storageAccountName&amp;#39;))]&amp;#34;&lt;/span>
],
&lt;span style="color:#f92672">&amp;#34;resources&amp;#34;&lt;/span>: [
{
&lt;span style="color:#f92672">&amp;#34;apiVersion&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;2016-03-01&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;appsettings&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;config&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;dependsOn&amp;#34;&lt;/span>: [
&lt;span style="color:#e6db74">&amp;#34;[resourceId(&amp;#39;Microsoft.Web/sites&amp;#39;, variables(&amp;#39;functionAppName&amp;#39;))]&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;[resourceId(&amp;#39;Microsoft.Storage/storageAccounts&amp;#39;, variables(&amp;#39;storageAccountName&amp;#39;))]&amp;#34;&lt;/span>
],
&lt;span style="color:#f92672">&amp;#34;properties&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;AzureWebJobsStorage&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[concat(&amp;#39;DefaultEndpointsProtocol=https;AccountName=&amp;#39;,variables(&amp;#39;storageAccountName&amp;#39;),&amp;#39;; AccountKey=&amp;#39;,listkeys(resourceId(&amp;#39;Microsoft.Storage/storageAccounts&amp;#39;, variables(&amp;#39;storageAccountName&amp;#39;)), &amp;#39;2015-05-01-preview&amp;#39;).key1,&amp;#39;;&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;AzureWebJobsDashboard&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;[concat(&amp;#39;DefaultEndpointsProtocol=https;AccountName=&amp;#39;,variables(&amp;#39;storageAccountName&amp;#39;),&amp;#39;; AccountKey=&amp;#39;,listkeys(resourceId(&amp;#39;Microsoft.Storage/storageAccounts&amp;#39;, variables(&amp;#39;storageAccountName&amp;#39;)), &amp;#39;2015-05-01-preview&amp;#39;).key1,&amp;#39;;&amp;#39;)]&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;FUNCTIONS_EXTENSION_VERSION&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;~1&amp;#34;&lt;/span>
}
}
]
}
]
}
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="parameters">Parameters&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> {
&lt;span style="color:#f92672">&amp;#34;$schema&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;contentVersion&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;1.0.0.0&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;parameters&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;appName&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;value&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;#{AzureFunctionName}&amp;#34;&lt;/span>
}
}
}
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="build">Build&lt;/h1>
&lt;p>In TC Create a new project, add a new Build Configuration with 3 Build Steps.&lt;/p>
&lt;h2 id="parameters-1">Parameters&lt;/h2>
&lt;p>These are use in TC in scripts, variable names, &amp;hellip;&lt;/p>
&lt;ul>
&lt;li>apikey (generated in OD)&lt;/li>
&lt;li>packageId (&lt;code>tc-od&lt;/code>)&lt;/li>
&lt;li>server (url to OD)&lt;/li>
&lt;li>version (semantic version nr like &lt;code>1.0.%build.number%&lt;/code>)&lt;/li>
&lt;/ul>
&lt;h2 id="publish">publish&lt;/h2>
&lt;p>This runner type is .NET CLI (dotnet). Give a Step name. Choose publish as Command. Select the project. Set Configuration and Output directory to bin\Release\PublishOutput
&lt;img src="img/bsGq2cx.png" alt="">&lt;/p>
&lt;h2 id="pack">pack&lt;/h2>
&lt;p>This runner type is Command Line. Give a Step name. Choose Custom script and enter script below.&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-batch" data-lang="batch">&lt;span style="color:#66d9ef">cd&lt;/span> tc-od\bin\Release\PublishOutput
C:\Programs\Octo\octo&lt;span style="color:#75715e"> pack --id=%packageId% --format=zip --outFolder=../dist --version=%version%
&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="push">push&lt;/h2>
&lt;p>This runner type is Command Line. Give a Step name. Choose Custom script and enter script below.&lt;/p>
&lt;p>This pushed the zip file to OD.&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-batch" data-lang="batch">&lt;span style="color:#66d9ef">cd&lt;/span> tc-od\bin\Release\dist
C:\Programs\Octo\octo&lt;span style="color:#75715e"> push --server=%server% --apiKey=%apikey% --package=%packageId%.%version%.zip
&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="deploy">Deploy&lt;/h1>
&lt;p>In OD make sure you have setup&lt;/p>
&lt;ul>
&lt;li>an Environment&lt;/li>
&lt;li>a Deployment target(in our case a Azure Web App)&lt;/li>
&lt;li>a Lifecycle with automatic deploy after release creation&lt;/li>
&lt;li>an Azure Subscription (this is needed to deploy)&lt;/li>
&lt;/ul>
&lt;p>Add a project.&lt;/p>
&lt;p>Under Process add 2 steps:&lt;/p>
&lt;ul>
&lt;li>Deploy Resources&lt;/li>
&lt;li>Deploy Function&lt;/li>
&lt;/ul>
&lt;h2 id="deploy-resources">Deploy Resources&lt;/h2>
&lt;p>In this step we deploy the ARM template.&lt;/p>
&lt;p>Search for &lt;code>resource Group&lt;/code> and select Deploy an Azure resource Group.&lt;/p>
&lt;ul>
&lt;li>Set Step Name&lt;/li>
&lt;li>Select Execution Plan&lt;/li>
&lt;li>Select an Azure Account and Resource Group&lt;/li>
&lt;li>Select File inside a package&lt;/li>
&lt;li>Select Package&lt;/li>
&lt;li>Set Paths&lt;/li>
&lt;/ul>
&lt;h2 id="deploy-function">Deploy Function&lt;/h2>
&lt;p>In this step we deploy the Function.&lt;/p>
&lt;p>Search for &lt;code>azure web&lt;/code> and select Deploy an Azure Web App.&lt;/p>
&lt;ul>
&lt;li>Set Step Name&lt;/li>
&lt;li>Select Package&lt;/li>
&lt;/ul>
&lt;p>This is it. Happy coding!&lt;/p>
&lt;h1 id="resources">Resources&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="https://octopus.com/blog/azure-functions">https://octopus.com/blog/azure-functions&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>